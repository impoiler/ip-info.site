<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Geolocation API Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent: #58a6ff;
            --border: #30363d;
            --success: #238636;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        .header {
            background-color: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 1rem 0;
            margin-bottom: 2rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .author-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
        }

        .github-link {
            color: var(--accent);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: opacity 0.2s;
        }

        .github-link:hover {
            opacity: 0.8;
        }

        h1 {
            color: var(--text-primary);
            margin: 0;
            font-size: 1.8rem;
        }

        h2 {
            color: var(--text-primary);
            margin-top: 2rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .endpoint {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .endpoint h3 {
            margin: 0 0 1rem 0;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        code {
            background-color: var(--bg-primary);
            color: var(--accent);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        }

        .try-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background-color: var(--success);
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 6px;
            margin-top: 1rem;
            transition: background-color 0.2s;
            font-weight: 500;
        }

        .try-btn:hover {
            background-color: #2ea043;
        }

        .response-example {
            background-color: var(--bg-primary);
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
            border: 1px solid var(--border);
        }

        .response-example pre {
            margin: 0;
            color: var(--text-primary);
        }

        .method {
            color: #a371f7;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container header-content">
            <h1>IP Geolocation API</h1>
            <div class="author-info">
                <span>by Suresh</span>
                <a href="https://github.com/impoiler/ip-info.site" class="github-link">
                    <i class="fab fa-github"></i>
                    View on GitHub
                </a>
            </div>
        </div>
    </div>

    <div class="container">
        <p>A fast and reliable service that provides IP address geolocation information using the MaxMind GeoLite2 database. Get detailed location data for any IP address or discover your own IP address with our simple API endpoints.</p>

        <h2>Available Endpoints</h2>

        <div class="endpoint">
            <h3>
                <i class="fas fa-network-wired"></i>
                Get Your IP Address
            </h3>
            <p><strong>Endpoint:</strong> <span class="method">GET</span> <code>/ip</code></p>
            <p>Returns your current IP address.</p>
            <p><strong>Response:</strong> Plain text containing the IP address</p>
            <a href="/ip" class="try-btn" target="_blank">
                <i class="fas fa-play"></i>
                Try it
            </a>
        </div>

        <div class="endpoint">
            <h3>
                <i class="fas fa-globe"></i>
                IP Geolocation Lookup
            </h3>
            <p><strong>Endpoint:</strong> <span class="method">GET</span> <code>/lookup?ip=x.x.x.x</code></p>
            <p>Returns geolocation data for the specified IP address. If no IP is provided, it uses your current IP.</p>
            <p><strong>Query Parameters:</strong></p>
            <ul>
                <li><code>ip</code> (optional) - The IP address to look up</li>
            </ul>
            <p><strong>Response Example:</strong></p>
            <div class="response-example">
                <pre>{
    "country": "US",
    "city": "San Francisco",
    "latitude": 37.7749,
    "longitude": -122.4194,
    "postal_code": "94105",
    "time_zone": "America/Los_Angeles",
    "subdivision": "CA",
    "asn": 13335,
    "organization": "Cloudflare, Inc."
}</pre>
            </div>
            <a href="/lookup" class="try-btn" target="_blank">
                <i class="fas fa-play"></i>
                Try it with your IP
            </a>
        </div>

        <div class="endpoint">
            <h3>
                <i class="fas fa-layer-group"></i>
                Batch IP Lookup
            </h3>
            <p><strong>Endpoint:</strong> <span class="method">POST</span> <code>/batch-lookup</code></p>
            <p>Lookup multiple IP addresses in a single request. Supports up to 100 IPs per request.</p>
            <p><strong>Request Body:</strong></p>
            <div class="response-example">
                <pre>{
    "ips": ["8.8.8.8", "1.1.1.1"]
}</pre>
            </div>
            <p><strong>Response Example:</strong></p>
            <div class="response-example">
                <pre>{
    "results": {
        "8.8.8.8": {
            "country": "US",
            "city": "Mountain View",
            "latitude": 37.4056,
            "longitude": -122.0775,
            "postal_code": "94043",
            "time_zone": "America/Los_Angeles",
            "subdivision": "CA",
            "asn": 15169,
            "organization": "Google LLC"
        },
        "1.1.1.1": {
            "country": "US",
            "city": "Los Angeles",
            "latitude": 34.0522,
            "longitude": -118.2437,
            "postal_code": "90001",
            "time_zone": "America/Los_Angeles",
            "subdivision": "CA",
            "asn": 13335,
            "organization": "Cloudflare, Inc."
        }
    },
    "errors": {}
}</pre>
            </div>
            <div class="try-it-section">
                <textarea id="batch-ips" placeholder="Enter IPs (one per line)" rows="5" style="width: 100%; margin-top: 1rem; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); border-radius: 6px; padding: 0.5rem;"></textarea>
                <button onclick="tryBatchLookup()" class="try-btn" style="margin-top: 1rem;">
                    <i class="fas fa-play"></i>
                    Try Batch Lookup
                </button>
                <pre id="batch-result" style="display: none; margin-top: 1rem;" class="response-example"></pre>
            </div>
        </div>
    </div>

    <script>
        async function tryBatchLookup() {
            const textarea = document.getElementById('batch-ips');
            const resultPre = document.getElementById('batch-result');
            
            const ips = textarea.value.split('\n')
                .map(ip => ip.trim())
                .filter(ip => ip.length > 0);
            
            if (ips.length === 0) {
                alert('Please enter at least one IP address');
                return;
            }
            
            try {
                const response = await fetch('/batch-lookup', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ ips })
                });
                
                const data = await response.json();
                resultPre.textContent = JSON.stringify(data, null, 2);
                resultPre.style.display = 'block';
            } catch (error) {
                alert('Error performing batch lookup: ' + error.message);
            }
        }
    </script>
</body>
</html>
